<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>MIA Nightclub System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="login-container">
        <h1 class="logo">MIA</h1>
        <p class="subtitle">nightclub system</p>

        <div class="login-box">
            <input type="text" placeholder="Benutzername">
            <input type="password" placeholder="Passwort">
            <button class="login-btn">Login</button>
<button class="register-btn">Registrieren</button>
        </div>
        
        <div class="register-overlay" id="registerOverlay">
    <div class="register-box">
        <h2>Registrieren</h2>
        <input type="text" placeholder="Benutzername">
        <input type="password" placeholder="Passwort">
        <input type="password" placeholder="Passwort wiederholen">
        <button class="login-btn">Account erstellen</button>
        <button class="close-btn" onclick="closeRegister()">Abbrechen</button>
    </div>
</div>

    </div>

</body>
        <script>

/* ===========================
   SYSTEM KERNEL
=========================== */

/* Rechte Definition */
const PERMISSIONS = {
    VIEW_INFO: "view_info",
    EDIT_INFO: "edit_info",
    MANAGE_USERS: "manage_users",
    EDIT_DRINKS: "edit_drinks",
    EDIT_SETTINGS: "edit_settings",
    ACCESS_BARKEEPER: "access_barkeeper",
    ACCESS_RUNNER: "access_runner"
};

/* Rollen Definition */
const ROLES = {
    GOD: {
        name: "god",
        permissions: "ALL"
    },
    SUPERADMIN: {
        name: "superadmin",
        permissions: [
            PERMISSIONS.VIEW_INFO,
            PERMISSIONS.EDIT_INFO,
            PERMISSIONS.MANAGE_USERS,
            PERMISSIONS.EDIT_DRINKS,
            PERMISSIONS.EDIT_SETTINGS,
            PERMISSIONS.ACCESS_BARKEEPER,
            PERMISSIONS.ACCESS_RUNNER
        ]
    },
    ADMIN: {
        name: "admin",
        permissions: [
            PERMISSIONS.VIEW_INFO,
            PERMISSIONS.EDIT_INFO,
            PERMISSIONS.ACCESS_BARKEEPER,
            PERMISSIONS.ACCESS_RUNNER
        ]
    },
    BARKEEPER: {
        name: "barkeeper",
        permissions: [
            PERMISSIONS.VIEW_INFO,
            PERMISSIONS.ACCESS_BARKEEPER
        ]
    },
    RUNNER: {
        name: "runner",
        permissions: [
            PERMISSIONS.VIEW_INFO,
            PERMISSIONS.ACCESS_RUNNER
        ]
    }
};

/* Fake Benutzer Daten */
const USERS = [
    { username: "melven", roles: ["god"] },
    { username: "kevin", roles: ["superadmin"] },
    { username: "lisa", roles: ["admin"] },
    { username: "max", roles: ["barkeeper"] },
    { username: "tom", roles: ["runner"] }
];

/* Aktuelle Session */
let currentUser = null;

/* Login Funktion */
function fakeLogin() {
    const usernameInput = document
        .querySelector('.login-box input[type="text"]')
        .value.toLowerCase();

    const foundUser = USERS.find(user => user.username === usernameInput);

    if (!foundUser) {
        alert("Unbekannter Benutzer");
        return;
    }

    buildUserSession(foundUser);
}

/* Session Aufbau */
function buildUserSession(userData) {

    if (userData.roles.includes("god")) {
        currentUser = {
            username: userData.username,
            role: "god",
            permissions: "ALL"
        };
    } else {
        let collectedPermissions = [];

        userData.roles.forEach(roleName => {
            const role = Object.values(ROLES).find(r => r.name === roleName);
            if (role) {
                collectedPermissions.push(...role.permissions);
            }
        });

        currentUser = {
            username: userData.username,
            role: userData.roles[0],
            permissions: [...new Set(collectedPermissions)]
        };
    }

    showInfoScreen();
}

/* Info Screen Platzhalter */
function showInfoScreen() {
    document.body.innerHTML = `
        <div style="text-align:center; padding-top:100px;">
            <h1>Willkommen ${currentUser.username}</h1>
            <p>Rolle: ${currentUser.role}</p>
            <p>Rechte: ${currentUser.permissions === "ALL" ? "ALLE RECHTE" : currentUser.permissions.join(", ")}</p>
        </div>
    `;
}

</script>
        
</html>
